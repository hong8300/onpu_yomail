# 楽譜学習アプリ「Onpu」要件定義書

## 1. プロジェクト概要

### 1.1 目的
楽譜の音符を見て即座に音名を認識できるようになるための学習アプリ。
「ドから数えて音符を読む」習慣を改善し、瞬時に音符を識別できる能力を養う。

### 1.2 対象ユーザー
- 個人（ローカル環境での使用）
- 楽譜学習初心者〜中級者

### 1.3 動作環境
- ウェブブラウザ上で動作（HTML/CSS/JavaScript）
- ローカルMac環境
- Node.jsサーバー使用可
- 複数のMac間での移行可能（GitHub経由）

## 2. 機能要件

### 2.1 音符表示機能
- **対応音域**: C1〜C5
- **記号**: ト音記号、ヘ音記号
- **音符種類**: 単音のみ（変化記号なし）
- **表示方法**: 
  - 事前準備した五線譜画像
  - 音符PNG画像を動的配置

### 2.2 回答機能
- **入力方法**: 
  - ボタン選択（ド(C)、レ(D)形式）
  - 将来的にMIDIキーボード対応を検討
- **表記**: 日本式（ドレミ）＋英語式（CDE）併記

### 2.3 学習設定機能
- **問題数選択**: 10, 20, 30, 40, 50, 60, 70, 80, 90, 100問から選択
- **出題方式**: ランダム（同じ音符が連続しない制御）
- **音域制限**: 特定範囲での練習可能（例：C2〜C4）
- **難易度調整**: 段階的な難易度設定

### 2.4 フィードバック機能
- **即時フィードバック**: 正解/不正解の表示
- **セッション結果**: 
  - 正解率
  - 所要時間（トータル）

### 2.5 学習履歴機能
- **記録項目**:
  - 日時
  - 正解率
  - 所要時間
  - 練習した音域
  - 間違えやすい音符の統計
  - 正解に時間がかかった音符
- **保存期間**: 無期限
- **保存方式**: ローカルファイル（JSON/SQLite）
- **移行**: データフォルダのコピーで他マシンへ移行可能

## 3. 非機能要件

### 3.1 UI/UX要件
- **レスポンシブ対応**: PC、タブレット対応
- **テーマ**: ライトモード/ダークモード切り替え
- **楽譜サイズ**: デバイスに応じて自動調整

### 3.2 性能要件
- **応答速度**: 音符表示・切り替えは即座に反応
- **データ保存**: リアルタイムまたはセッション終了時

### 3.3 保守性要件
- **ソースコード管理**: GitHub
- **モジュール構成**: 機能ごとに分離された構造
- **拡張性**: 将来的なMIDI対応を考慮した設計

## 4. 技術スタック（予定）

### 4.1 フロントエンド
- HTML5
- CSS3（レスポンシブ、ダークモード対応）
- JavaScript（ES6+）
- UIフレームワーク: （検討中）

### 4.2 バックエンド
- Node.js（開発サーバー）
- Express.js（必要に応じて）

### 4.3 データ保存
- ローカルファイルシステム
- 形式：JSON または SQLite

### 4.4 画像リソース
- 五線譜: 事前準備のPNG/SVG画像
- 音符: 個別のPNG画像

## 5. 画面構成

### 5.1 メイン画面
- 設定エリア（問題数、音域、難易度）
- 楽譜表示エリア
- 回答ボタンエリア
- 進捗表示（現在の問題数/総問題数）
- スコア表示

### 5.2 結果画面
- セッション結果（正解率、所要時間）
- 間違えた音符の一覧
- 「もう一度」「設定変更」ボタン

### 5.3 履歴画面
- 過去のセッション一覧
- 統計情報（苦手な音符、平均応答時間など）

## 6. 開発フェーズ

### Phase 1: 基礎機能実装
1. プロジェクトセットアップ
2. 楽譜表示機能
3. 基本的な回答機能
4. 正解/不正解判定

### Phase 2: 学習機能拡張
1. 難易度設定
2. 音域制限機能
3. 学習履歴記録

### Phase 3: UI/UX改善
1. レスポンシブ対応
2. ダークモード実装
3. アニメーション追加

### Phase 4: 将来拡張（オプション）
1. MIDIキーボード対応
2. 和音対応
3. リズム学習機能

## 7. 制約事項
- シングルユーザー使用（マルチユーザー管理なし）
- オフライン動作が基本
- 外部サーバー不要

## 8. 成功指標
- 音符を見て1秒以内に音名を答えられるようになる
- 継続的な学習により正解率90%以上を達成
- 全音域での即座の音符認識が可能になる